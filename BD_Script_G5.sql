--Drop table
DROP TABLE PUESTO CASCADE CONSTRAINTS;
DROP TABLE EMPLEADO CASCADE CONSTRAINTS;
DROP TABLE CLIENTE CASCADE CONSTRAINTS;
DROP TABLE GERENTE CASCADE CONSTRAINTS;
DROP TABLE MARCA CASCADE CONSTRAINTS;
DROP TABLE VENTA CASCADE CONSTRAINTS;
DROP TABLE PROVEEDOR CASCADE CONSTRAINTS;
DROP TABLE PRODUCTO CASCADE CONSTRAINTS;
DROP TABLE VENTA_PRODUCTO CASCADE CONSTRAINTS;
--Create Table
--
CREATE TABLE PUESTO
(
CODIGO          NUMBER(15)      NOT NULL ,
NOMBRE      VARCHAR2(50)    NOT NULL 
);
--
CREATE TABLE EMPLEADO
(
CEDULA      NUMBER(15)      NOT NULL ,
CED_GER     NUMBER(15)      NOT NULL,
PUESTO      NUMBER(15)      NOT NULL,
NOMBRE      VARCHAR2(50)    NOT NULL,
APELLIDO_1  VARCHAR2(50)    NOT NULL,
APELLIDO_2  VARCHAR2(50)            ,
CORREO_E    VARCHAR2(130)    NOT NULL 
);
--
CREATE TABLE CLIENTE
(
CEDULA      NUMBER(15)      NOT NULL ,
NOMBRE      VARCHAR2(50)    NOT NULL,
APELLIDO_1  VARCHAR2(50)    NOT NULL,
APELLIDO_2  VARCHAR2(50)            ,
TELEFONO    NUMBER(20)      NOT NULL,
CORREO_E    VARCHAR2(130)   NOT NULL 
);
CREATE TABLE GERENTE
(
CEDULA      NUMBER(15)      NOT NULL ,
PUESTO      NUMBER(15)      NOT NULL,
NOMBRE      VARCHAR2(50)    NOT NULL,
APELLIDO_1  VARCHAR2(50)    NOT NULL,
APELLIDO_2  VARCHAR2(50)    NOT NULL,
TELEFONO    NUMBER(20)      NOT NULL,
CORREO_E    VARCHAR2(130)   NOT NULL 
);
CREATE TABLE MARCA (
CODIGO          NUMBER(15)      NOT NULL ,
NOMBRE      VARCHAR2(50)    NOT NULL
);
CREATE TABLE VENTA (
CODIGO      NUMBER(15)      NOT NULL ,
CED_CLI     NUMBER(15)      NOT NULL,
CED_EMP     NUMBER(15)      NOT NULL,
FEC_COM     DATE        NOT NULL
);
CREATE TABLE PROVEEDOR(
CEDULA      NUMBER(15)      NOT NULL,
NOMBRE      VARCHAR2(50)    NOT NULL,
APELLIDO1   VARCHAR2(50)            ,
APELLIDO2   VARCHAR2(50)            ,
TELEFONO    VARCHAR2(20)    NOT NULL,
CORREO      VARCHAR2(100)   NOT NULL,
DIRECCION   VARCHAR2(170)   NOT NULL,
CED_GED     NUMBER(15)      NOT NULL 
);
CREATE TABLE PRODUCTO(
CODIGO      NUMBER(15)      NOT NULL ,
NOMBRE      VARCHAR2(50)    NOT NULL ,
PRECIO      NUMBER(10)   NOT NULL,
CANTIDAD    NUMBER(20)      NOT NULL,
DESCRIPCION VARCHAR2(200)   NOT NULL,
CED_PROV    NUMBER(15)      NOT NULL,
MARCA       NUMBER(20)    NOT NULL
);
--**TABLAS N:N

CREATE TABLE VENTA_PRODUCTO(
TRANSACCION NUMBER(15)      NOT NULL ,
COD_PRODUC  NUMBER(15)      NOT NULL,
COD_VENTA   NUMBER(15)      NOT NULL
);

--**PRIMARY KEYS
--PUESTO
ALTER TABLE PUESTO ADD CONSTRAINT pk_PUESTO PRIMARY KEY (CODIGO);
--GERENTE
ALTER TABLE GERENTE ADD CONSTRAINT pk_GERENTE PRIMARY KEY(CEDULA);
--EMPLEADO
ALTER TABLE EMPLEADO ADD CONSTRAINT pk_EMPLEADO PRIMARY KEY(CEDULA);
--PROVEEDOR
ALTER TABLE PROVEEDOR ADD CONSTRAINT pk_PROVEEDOR PRIMARY KEY(CEDULA);
--CLIENTE
ALTER TABLE CLIENTE ADD CONSTRAINT pk_CLIENTE PRIMARY KEY(CEDULA);
--MARCA
ALTER TABLE MARCA ADD CONSTRAINT pk_MARCA PRIMARY KEY(CODIGO);
--PRODUCTO
ALTER TABLE PRODUCTO ADD CONSTRAINT pk_PRODUCTO PRIMARY KEY(CODIGO);
--VENTA
ALTER TABLE VENTA ADD CONSTRAINT pk_VENTA PRIMARY KEY(CODIGO);
--VENTA_PRODUCTO
ALTER TABLE VENTA_PRODUCTO ADD CONSTRAINT pk_VENTAPRODUCTO PRIMARY KEY(TRANSACCION);

--Alter Table
--**ALTER GERENTE
ALTER TABLE GERENTE ADD CONSTRAINT fk_GERENTE_PUESTO FOREIGN KEY(PUESTO) REFERENCES PUESTO(CODIGO);
ALTER TABLE GERENTE ADD CONSTRAINT ck_GERENTE_CORREO CHECK (CORREO_E LIKE '%@%valhalla.cr%');
--**ALTER EMPLEADO
ALTER TABLE EMPLEADO ADD CONSTRAINT fk_EMPLEADO_PUESTO FOREIGN KEY(PUESTO) REFERENCES PUESTO(CODIGO);
ALTER TABLE EMPLEADO ADD CONSTRAINT fk_EMPLEADO_CED_GER FOREIGN KEY(CED_GER) REFERENCES GERENTE(CEDULA);
ALTER TABLE EMPLEADO ADD CONSTRAINT ck_EMPLEADO_CORREO CHECK (CORREO_E LIKE '%@%valhalla.cr%');
--**ALTER PROVEEDOR
ALTER TABLE PROVEEDOR ADD CONSTRAINT fk_PROVEEDOR_CED_GER FOREIGN KEY(CED_GED) REFERENCES GERENTE(CEDULA);
ALTER TABLE PROVEEDOR ADD CONSTRAINT ck_PROVEEDOR_CORREO CHECK (CORREO LIKE '%@%.com%');
--**ALTER PRODUCTO
ALTER TABLE PRODUCTO ADD CONSTRAINT fk_PRODUCTO_CED_PROV FOREIGN KEY(CED_PROV) REFERENCES PROVEEDOR(CEDULA);
ALTER TABLE PRODUCTO ADD CONSTRAINT fk_PRODUCTO_MARCA FOREIGN KEY(MARCA)REFERENCES MARCA(CODIGO);
--**ALTER VENTA
ALTER TABLE VENTA ADD CONSTRAINT fk_VENTA_CED_CLI FOREIGN KEY(CED_CLI) REFERENCES CLIENTE(CEDULA);
ALTER TABLE VENTA ADD CONSTRAINT fk_VENTA_CED_EMP FOREIGN KEY(CED_EMP) REFERENCES EMPLEADO(CEDULA);
--**ALTER VENTA_PRODUCTO
ALTER TABLE VENTA_PRODUCTO ADD CONSTRAINT fk_VENTAPRODUCTO_COD_PRODUC FOREIGN KEY(COD_PRODUC) REFERENCES PRODUCTO(CODIGO);
ALTER TABLE VENTA_PRODUCTO ADD CONSTRAINT fk_VENTAPRODUCTO_COD_VENTA FOREIGN KEY(COD_VENTA) REFERENCES VENTA(CODIGO);
--**ALTER CLIENTE
ALTER TABLE CLIENTE ADD CONSTRAINT ck_CLIENTE_CORREO CHECK (CORREO_E LIKE '%@%.com%');

--INSERT PUESTO
INSERT INTO PUESTO (CODIGO, NOMBRE) VALUES (1, 'Gerente');
INSERT INTO PUESTO (CODIGO, NOMBRE) VALUES (2, 'Limpieza');
INSERT INTO PUESTO (CODIGO, NOMBRE) VALUES (3, 'Cajero');
INSERT INTO PUESTO (CODIGO, NOMBRE) VALUES (4, 'Transportista');
INSERT INTO PUESTO (CODIGO, NOMBRE) VALUES (5, 'Bodeguero');
--INSERT GERENTE
INSERT INTO GERENTE (CEDULA, PUESTO, NOMBRE, APELLIDO_1, APELLIDO_2, TELEFONO, CORREO_E) VALUES (123456789, 1, 'Michael', 'Rodriguez', 'Perez', '88682264', 'Mrodriguez@valhalla.cr');
--INSERT EMPLEADO
INSERT INTO EMPLEADO (CEDULA, CED_GER, PUESTO, NOMBRE, APELLIDO_1, APELLIDO_2, CORREO_E) VALUES (987654321, 123456789, 2, 'Juan', 'Castillo', 'Mora', 'JCastillo@valhalla.cr');
INSERT INTO EMPLEADO (CEDULA, CED_GER, PUESTO, NOMBRE, APELLIDO_1, APELLIDO_2, CORREO_E) VALUES (111111111, 123456789, 3, 'Beto', 'Corrales', 'Morata', 'Mrodriguez@valhalla.cr');
INSERT INTO EMPLEADO (CEDULA, CED_GER, PUESTO, NOMBRE, APELLIDO_1, APELLIDO_2, CORREO_E) VALUES (222222222, 123456789, 3, 'Alice', 'Zuñiga', null, 'AZuniga@valhalla.cr');
INSERT INTO EMPLEADO (CEDULA, CED_GER, PUESTO, NOMBRE, APELLIDO_1, APELLIDO_2, CORREO_E) VALUES (333333333, 123456789, 5, 'Rodrigo', 'Matarita', 'Fernandez', 'RMatarita@valhalla.cr');
--INSERT CLIENTE
INSERT INTO CLIENTE (CEDULA, NOMBRE, APELLIDO_1, APELLIDO_2, TELEFONO, CORREO_E) VALUES (444444444, 'Sara', 'Johnson', null, '77953468', 'Cutedogs@gmail.com');
INSERT INTO CLIENTE (CEDULA, NOMBRE, APELLIDO_1, APELLIDO_2, TELEFONO, CORREO_E) VALUES (555555555, 'David', 'Alvarez', 'Rios', '61589943', 'AlvarezRD@gmail.com');
INSERT INTO CLIENTE (CEDULA, NOMBRE, APELLIDO_1, APELLIDO_2, TELEFONO, CORREO_E) VALUES (666666666, 'Maria', 'José', 'Fernandez', '81546899', 'MJFernandez@gmail.com');
--INSERT MARCA
INSERT INTO MARCA (CODIGO, NOMBRE) VALUES (1, 'Kingstone');
INSERT INTO MARCA (CODIGO, NOMBRE) VALUES (2, 'INTEL');
INSERT INTO MARCA (CODIGO, NOMBRE) VALUES (3, 'MSI');
--INSERT PROVEEDOR
INSERT INTO PROVEEDOR (CEDULA, NOMBRE, APELLIDO1, APELLIDO2, TELEFONO, CORREO, DIRECCION, CED_GED)
VALUES (232323232, 'Carlos', 'Perez', 'Garcia', '82222222', 'CPerez@gmail.com', 'Desamparados', 123456789);
INSERT INTO PROVEEDOR (CEDULA, NOMBRE, APELLIDO1, APELLIDO2, TELEFONO, CORREO, DIRECCION, CED_GED)
VALUES (679766876,'Gash', null, null, '22902998', 'gash@gmail.com', 'La Uruca', 123456789);
--INSERT PRODUCTO
INSERT INTO PRODUCTO (CODIGO, NOMBRE, PRECIO, CANTIDAD, DESCRIPCION, CED_PROV, MARCA)
VALUES (1, 'A400 240GB', 12000, 20, 'Sata 3 SSD 240GB', 232323232, 1);
INSERT INTO PRODUCTO (CODIGO, NOMBRE, PRECIO, CANTIDAD, DESCRIPCION, CED_PROV, MARCA)
VALUES (2, 'i5 8400', 120000, 5, 'Core i5 8400 2.8GHZ-3.4GHZ', 679766876, 2);
--INSERT VENTA
INSERT INTO VENTA (CODIGO, CED_CLI, CED_EMP, FEC_COM)
VALUES (1, 444444444, 111111111, TO_DATE('2023/04/28', 'YYYY/MM/DD'));
INSERT INTO VENTA (CODIGO, CED_CLI, CED_EMP, FEC_COM)
VALUES (2, 666666666, 222222222, TO_DATE('2023/04/27', 'YYYY/MM/DD'));
--INSERT VENTA_PRODUCTO
INSERT INTO VENTA_PRODUCTO (TRANSACCION, COD_PRODUC, COD_VENTA)
VALUES (1, 1, 1);
INSERT INTO VENTA_PRODUCTO (TRANSACCION, COD_PRODUC, COD_VENTA)
VALUES (2, 2, 1);
INSERT INTO VENTA_PRODUCTO (TRANSACCION, COD_PRODUC, COD_VENTA)
VALUES (3, 2, 2);
